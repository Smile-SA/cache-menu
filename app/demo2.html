<!DOCTYPE html>
<html>
<head>
	<title>Demo2 : deferred initialization</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="demo.css" />
</head>
<body>
	<div class="container">
		<nav class="menu">
			<ul>
				<li>
					<a href="#">Link 1</a>
					<!--(if target withoutCookie)> -->
					<div class="menu--sublevel">
						<img src="img/kitten1.jpg" />
						<ul>
							<li><a href="#">Link 1.1</a></li>
							<li><a href="#">Link 1.2</a></li>
							<li><a href="#">Link 1.3</a></li>
							<li><a href="#">Link 1.4</a></li>
							<li><a href="#">Link 1.5</a></li>
						</ul>
						<img src="img/kitten2.jpg" />
					</div>
					<!--<!(endif)-->
				</li>
				<li>
					<a href="#">Link 2</a>
					<!--(if target withoutCookie)> -->
					<div class="menu--sublevel">
						<img src="img/kitten3.jpg" />
						<ul>
							<li><a href="#">Link 2.1</a></li>
							<li><a href="#">Link 2.2</a></li>
							<li><a href="#">Link 2.3</a></li>
						</ul>
						<img src="img/kitten4.jpg" />
					</div>
					<!--<!(endif)-->
				</li>
				<li>
					<a href="#">Link 3</a>
					<!--(if target withoutCookie)> -->
					<div class="menu--sublevel">
						<img src="img/kitten5.jpg" />
						<ul>
							<li><a href="#">Link 3.01</a></li>
							<li><a href="#">Link 3.02</a></li>
							<li><a href="#">Link 3.03</a></li>
							<li><a href="#">Link 3.04</a></li>
							<li><a href="#">Link 3.05</a></li>
							<li><a href="#">Link 3.06</a></li>
							<li><a href="#">Link 3.07</a></li>
							<li><a href="#">Link 3.08</a></li>
							<li><a href="#">Link 3.09</a></li>
						</ul>
						<img src="img/kitten6.jpg" />
					</div>
					<!--<!(endif)-->
				</li>
			</ul>
		</nav>
	</div>
	<script src="bower_components/modernizr/modernizr.js"></script>
	<script src="bower_components/modernizr/feature-detects/cookies.js"></script>
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script src="src/docCookies.js"></script>
	<script src="src/jquery-cache-menu.js"></script>
	<script>
		(function($){
			$(document).ready(function(){
				$('.menu')
					.on('menu-initialization-done', function(){
						console.log('Menu is ready, go for its initialization');
					})
					.one('mouseenter', function(){
						$(this).trigger('menu-initialization-todo');
					})
					.cacheMenu({
						cookieInfo : {
							name : 'skipMenuTransfer-demo2'
						},
						storageCacheName : 'menuToCache-demo2',
						initAtStartup: false
					})
				;
			});
		}(jQuery));
	</script>
</body>
</html>